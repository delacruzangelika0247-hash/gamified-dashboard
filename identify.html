<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Identification Quiz - Philippine History</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Fredoka:wght@700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#f7f3ea;
  --card:#fffaf0;
  --accent:#d1831d;
  --accent-2:#f1a33d;
  --muted:#6b5b3c;
  --green:#2ea44f;
  --red:#d64545;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:'Inter',sans-serif;
  background:linear-gradient(180deg,#f7f3ea 0%, #e9f2ff 60%);
  color:#1f2937;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  min-height:100vh;
  padding:20px;
}
.quiz-shell{
  width:100%;
  max-width:1200px; /* Lumikha ng mas malawak na box */
  background:var(--card);
  border-radius:20px; /* Mas "solid" ang box */
  box-shadow:0 20px 60px rgba(18,25,40,0.2); /* Mas malakas ang shadow para mas boxy */
  padding:40px; /* Mas malaki ang laman ng box */
  border:5px solid rgba(209,155,50,0.2); /* Mas makapal ang border */
}
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:25px;
  flex-wrap:wrap;
}
.title{
  font-family:'Fredoka', sans-serif;
  font-weight:700;
  font-size:30px; /* Mas malaking title */
  color:#123;
}
.controls{
  display:flex;
  gap:10px;
  margin-top:10px;
}
.btn{
  background:linear-gradient(180deg,var(--accent-2),var(--accent));
  color:white;
  border:none;
  padding:14px 18px; /* Mas malaki ang button */
  border-radius:14px;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 10px 0 rgba(163,102,22,0.25);
}
.btn.secondary{
  background:transparent;
  color:var(--accent);
  border:2px solid rgba(209,155,50,0.2);
  box-shadow:none;
}
.timer{
  font-size:26px; /* Mas malaking timer */
  font-weight:700;
  color:#123;
}
.question-card{
  background:white;
  padding:28px; /* Mas malaki ang laman */
  border-radius:16px;
  border:1px solid rgba(31,41,55,0.05);
  box-shadow:0 12px 30px rgba(18,25,40,0.08);
  text-align:center;
}
.question-text{
  font-size:22px; /* Mas malaking text ng question */
  font-weight:700;
  margin-bottom:24px;
}
.answer-input{
  width:85%; /* Mas malaki ang input field */
  padding:14px 18px;
  font-size:18px;
  border-radius:14px;
  border:2px solid rgba(31,41,55,0.12);
  margin-bottom:24px;
}
.actions-row{
  display:flex;
  justify-content:center;
  gap:14px;
  margin-top:18px;
}
.result-overlay{
  position:fixed;
  inset:0;
  background:rgba(13,18,25,0.45);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
  z-index:40;
}
.result-card{
  background:white;
  padding:32px;
  width:100%;
  max-width:700px; /* Mas malaki ang result card */
  border-radius:16px;
  text-align:center;
  box-shadow:0 30px 80px rgba(10,20,40,0.35);
}
.big-score{ font-size:48px; font-weight:800; color:var(--accent); margin-bottom:12px; }
</style>
</head>
<body>

<div class="quiz-shell">
  <div class="header">
    <div class="title">Identification Quiz</div>
    <div class="timer" id="timer">02:00</div>
    <div class="controls">
      <button class="btn secondary" id="pauseBtn">⏸ Pause</button>
      <button class="btn secondary" id="quitBtn">❌ Quit</button>
    </div>
  </div>

  <div class="question-card">
    <div class="question-text" id="questionText">Question here...</div>
    <input type="text" id="answerInput" class="answer-input" placeholder="Type your answer">
    <button class="btn" id="submitBtn">Submit</button>
  </div>
</div>

<div class="result-overlay" id="resultOverlay" style="display:none;">
  <div class="result-card">
    <div class="big-score" id="finalScore"></div>
    <div class="actions-row">
      <button class="btn" onclick="restartQuiz()">Restart Quiz</button>
      <button class="btn secondary" onclick="window.location.href='Quizzes.html'">Exit</button>
    </div>
  </div>
</div>

<!-- Audio -->
<audio id="correctSound"><source src="correct.mp4" type="audio/mpeg"></audio>
<audio id="wrongSound"><source src="wrong.mp3" type="audio/mpeg"></audio>

<script>
// Quiz Data
const quizData = [
  {q:"Who is the author of 'Noli Me Tangere'?", answer:"Jose Rizal"},
  {q:"Founder of Katipunan?", answer:"Andres Bonifacio"},
  {q:"First President of the Philippines?", answer:"Emilio Aguinaldo"},
  {q:"Known as 'Brains of the Revolution'?", answer:"Apolinario Mabini"},
  {q:"Who is 'Tandang Sora'?", answer:"Melchora Aquino"},
  {q:"Edited La Solidaridad?", answer:"Marcelo H. del Pilar"},
  {q:"Chieftain of Mactan who resisted Magellan?", answer:"Lapu-Lapu"},
  {q:"Painter of 'Spoliarium'?", answer:"Juan Luna"},
  {q:"Female revolutionary leader of Ilocos?", answer:"Gabriela Silang"},
  {q:"Led Ilocano revolt against Spain?", answer:"Diego Silang"},
  {q:"Brilliant general known for strict discipline?", answer:"Antonio Luna"},
  {q:"Young general in Tirad Pass?", answer:"Gregorio del Pilar"},
  {q:"Founder of Girl Scouts Philippines?", answer:"Josefa Llanes Escoda"},
  {q:"Famous poet of 'Florante at Laura'?", answer:"Francisco Balagtas"},
  {q:"Second President of the Philippines?", answer:"Manuel L. Quezon"}
];

let current=0;
let score=0;
let timer=120;
let timerInterval;
let paused=false;

// Elements
const questionText = document.getElementById("questionText");
const answerInput = document.getElementById("answerInput");
const submitBtn = document.getElementById("submitBtn");
const timerEl = document.getElementById("timer");
const resultOverlay = document.getElementById("resultOverlay");
const finalScore = document.getElementById("finalScore");
const correctSound = document.getElementById("correctSound");
const wrongSound = document.getElementById("wrongSound");

// Load question
function loadQuestion(){
  questionText.textContent = quizData[current].q;
  answerInput.value="";
  answerInput.focus();
}

// Check Answer
submitBtn.onclick = ()=>{
  const userAns = answerInput.value.trim().toLowerCase();
  const correctAns = quizData[current].answer.toLowerCase();
  if(userAns===correctAns){
    score++;
    correctSound.play();
  } else {
    wrongSound.play();
  }
  current++;
  if(current>=quizData.length){
    endQuiz();
  } else {
    loadQuestion();
  }
}

// Timer
function startTimer(){
  timerInterval=setInterval(()=>{
    if(!paused){
      timer--;
      let min=Math.floor(timer/60);
      let sec=timer%60;
      timerEl.textContent=`${min.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
      if(timer<=0){
        clearInterval(timerInterval);
        endQuiz();
      }
    }
  },1000);
}

// Pause
document.getElementById("pauseBtn").onclick = ()=>{
  paused=!paused;
  document.getElementById("pauseBtn").textContent=paused?"▶ Resume":"⏸ Pause";
}

// Quit
document.getElementById("quitBtn").onclick = ()=>{
  if(confirm("Are you sure you want to quit?")){
    window.location.href='index.html';
  }
}

// ✅ Standard Snippet: Leaderboard integration
function endQuiz(){
  clearInterval(timerInterval);

  // Save to leaderboard
  const playerName = localStorage.getItem("playerName") || "Player";
  const finalScoreValue = score;
  const finalTime = 120 - timer;
  const gameType = "Identification";

  const lastEntryKey = localStorage.getItem("lastEntryKey") || "";
  const currentEntryKey = `${gameType}_${playerName}_${finalScoreValue}_${finalTime}`;

  if(currentEntryKey !== lastEntryKey){
    let leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];
    leaderboard.push({
      gameType,
      name: playerName,
      avg: finalScoreValue,
      time: finalTime
    });
    localStorage.setItem("leaderboard", JSON.stringify(leaderboard));
    localStorage.setItem("lastEntryKey", currentEntryKey);
  }

  resultOverlay.style.display="flex";
  finalScore.textContent=`Score: ${score}/${quizData.length}`;

  // Redirect to leaderboard after 2 seconds
  setTimeout(()=>{
    window.location.href="Leaderboard.html";
  },2000);
}

// Restart
function restartQuiz(){
  current=0;
  score=0;
  timer=120;
  paused=false;
  resultOverlay.style.display="none";
  loadQuestion();
  startTimer();
}

// Initialize
loadQuestion();
startTimer();
</script>

</body>
</html>
